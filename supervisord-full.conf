# supervisord-full.conf
[supervisord]
nodaemon=true                     ; Run supervisor in the foreground (required for Docker)
logfile=/dev/null                 ; Discard supervisor's own log
pidfile=/tmp/supervisord.pid      ; PID file path

; Program definition for PHP-FPM
[program:php-fpm]
command=/usr/local/bin/php-fpm-cmd.sh
autostart=true
autorestart=true
priority=5                        ; Start/stop priority
stdout_logfile=/dev/stdout        ; Redirect stdout to Docker logs
stdout_logfile_maxbytes=0         ; Disable rotation (Docker manages logs)
stderr_logfile=/dev/stderr        ; Redirect stderr to Docker logs
stderr_logfile_maxbytes=0

; Program definition for Nginx
[program:nginx]
command=/usr/local/bin/nginx-cmd.sh
autostart=true
autorestart=true
priority=10                       ; Start/stop after php-fpm
stdout_logfile=/dev/stdout        ; Redirect stdout (access.log is configured in nginx.conf)
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr        ; Redirect stderr (error.log is configured in nginx.conf)
stderr_logfile_maxbytes=0

